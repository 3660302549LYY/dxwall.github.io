(window.webpackJsonp=window.webpackJsonp||[]).push([["layout-post"],{1547:function(t,e,r){"use strict";r(1),Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;e.render=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app_post",attrs:{id:"app"}},[e("SsCustomHeader",{directives:[{name:"translate",rawName:"v-translate"}],class:["comp__SsCustomHeader",t.setting.grayscale_on?"color__grayscale":""],attrs:{id:"app-head","is-login":t.isLogin,"user-info":t.userInfo,whitelist:t.setting.external_links_whitelist,initial:t.customHeader,"notice-count":t.notifications},on:{logout:function(e){return t.$emit("logout")},login:function(e){return t.$emit("login")}}}),t._v(" "),e("router-view"),t._v(" "),e("div",{staticClass:"app_toolbar"},[t.showWriteMoreFlag?e("el-popover",{attrs:{placement:"left","popper-class":"app_article_write_more-popper ss-popper-dark-border",trigger:"click"}},[e("button",{staticClass:"circle app_btn-article",attrs:{slot:"reference"},slot:"reference"},[e("i",{staticClass:"iconfont iconfont-more"})]),t._v(" "),e("div",{staticClass:"icon-write_more_box"},[e("span",{on:{click:t.editArticleClick}},[t._v("编辑")]),t._v(" "),e("span",{on:{click:t.contributeArticleClick}},[t._v("投稿")]),t._v(" "),e("span",{on:{click:t.deleteArticleClick}},[t._v("删除")]),t._v(" "),e("span",{on:{click:t.createArticleClick}},[t._v("新建")])])]):t._e(),t._v(" "),e("div",{staticClass:"app__tool__item"},[e("btn-app-top")],1)],1),t._v(" "),t.showWriteMoreFlag?e("ss-dialog",{staticClass:"contributeArticleDialog",attrs:{visible:t.articleContributeFlag},on:{"update:visible":function(e){t.articleContributeFlag=e}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n      投稿\n    ")]),t._v(" "),e("div",[e("label",{staticClass:"contributeInputLabel",attrs:{for:"contributeInput"}},[t._v("\n        请选择你投稿的专栏\n      ")]),t._v(" "),e("el-select",{staticClass:"contributeInput",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入专栏名称","remote-method":t.remoteMethod,loading:t.remoteLoading},model:{value:t.column,callback:function(e){t.column=e},expression:"column"}},t._l(t.remoteOptions,(function(t){return e("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("ss-button",{attrs:{type:"confirm bgGrey"},nativeOn:{click:function(e){return t.contributeArticleSure.apply(null,arguments)}}},[t._v("\n        确定\n      ")])],1)]):t._e(),t._v(" "),t.showWriteMoreFlag?e("ss-dialog",{attrs:{visible:t.articleDeleteFlag},on:{"update:visible":function(e){t.articleDeleteFlag=e}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n      确认要删除吗？\n    ")]),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("ss-button",{attrs:{type:"cancel"},nativeOn:{click:function(e){return t.deleteArticleCancel.apply(null,arguments)}}},[t._v("\n        取消\n      ")]),t._v(" "),e("ss-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"confirm bgGrey"},nativeOn:{click:function(e){return t.deleteArticleSure.apply(null,arguments)}}},[t._v("\n        确定\n      ")])],1)]):t._e(),t._v(" "),e("SsCustomFooter",{staticClass:"comp__SsCustomFooter",attrs:{id:"app-footer"}})],1)},e.staticRenderFns=[]},1548:function(t,e,r){var n=r(2093);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r(48).default)("a95a0386",n,!0,{})},2091:function(t,e,r){"use strict";var n=r(1547);r.o(n,"render")&&r.d(e,"render",(function(){return n.render})),r.o(n,"staticRenderFns")&&r.d(e,"staticRenderFns",(function(){return n.staticRenderFns}))},2092:function(t,e,r){"use strict";r(1548)},2093:function(t,e,r){(e=r(47)(!1)).push([t.i,".app_post#app[data-v-38375361]{--h-ssCustomHeader:56px;--footer_height:514px;background:var(--B0);padding-top:var(--h-ssCustomHeader);padding-bottom:var(--height-SsCustomFooter,0);width:100vw;overflow-x:hidden;position:relative;box-sizing:border-box}.app_post#app .comp__SsCustomHeader[data-v-38375361]{position:fixed;width:100vw;top:0;z-index:199}.app_post#app .comp__SsCustomHeader.translate[data-v-38375361]{transform:translateY(-100%);transition:transform .3s var(--a-func-default)}.app_post#app .comp__SsCustomFooter[data-v-38375361]{position:absolute;bottom:0;width:100%}.app_article_write_more-popper[data-v-38375361]{border-radius:0;display:flex;align-items:center;text-align:center;padding:12px 20px}.app_article_write_more-popper .icon-write_more_box[data-v-38375361]{font-size:12px;line-height:17px;color:var(--B80)}.app_article_write_more-popper .icon-write_more_box span[data-v-38375361]{margin-right:20px;cursor:pointer}.app_article_write_more-popper .icon-write_more_box span[data-v-38375361]:last-child{margin-right:0}.app_article_write_more-popper .icon-write_more_box span[data-v-38375361]:hover{color:var(--B100)}.app_btn-article[data-v-38375361]{width:40px;height:40px;background:var(--B0)}.app_btn-article .iconfont[data-v-38375361]{font-size:24px}.app_btn-article[data-v-38375361]{color:var(--B60)}.app_btn-article .iconfont[data-v-38375361]{font-size:32px}.app_btn-article[data-v-38375361]:hover{color:var(--B80)}.contributeArticleDialog .contributeInputLabel[data-v-38375361]{font-size:14px;line-height:20px;color:var(--B100)}.contributeArticleDialog .contributeInput[data-v-38375361]{margin-top:13px;display:block}.contributeArticleDialog .contributeInput[data-v-38375361] .el-input__inner{height:50px;line-height:50px}.contributeArticleDialog .contributeInput[data-v-38375361] .el-input__suffix{display:none}.contributeArticleDialog[data-v-38375361] .el-dialog__footer{padding-top:20px;text-align:center}",""]),t.exports=e},438:function(t,e,r){"use strict";r.r(e);var n=r(2091),o=r(950);for(var i in o)"default"!==i&&function(t){r.d(e,t,(function(){return o[t]}))}(i);r(2092);var a=r(133),s=Object(a.a)(o.default,n.render,n.staticRenderFns,!1,null,"38375361",null);e.default=s.exports},488:function(t,e,r){var n=r(208),o=r(145);t.exports=function(t,e,r){var i=!0,a=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),n(t,e,{leading:i,maxWait:e,trailing:a})}},495:function(t,e,r){"use strict";r.r(e);var n=r(496),o=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e.default=o.a},496:function(t,e,r){"use strict";r(1);var n=r(2);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(139));e.default={name:"BtnAppTop",methods:{goTop:function(){(0,o.default)("body,html").animate({scrollTop:0},500)}}}},501:function(t,e,r){"use strict";r(1),Object.defineProperty(e,"__esModule",{value:!0}),e.staticRenderFns=e.render=void 0;e.render=function(){var t=this._self._c;return t("button",{staticClass:"circle app_btn-top",on:{click:this.goTop}},[t("i",{staticClass:"iconfont iconfont-top"})])},e.staticRenderFns=[]},502:function(t,e,r){var n=r(523);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r(48).default)("0706f709",n,!0,{})},520:function(t,e,r){"use strict";r.r(e);var n=r(521),o=r(495);for(var i in o)"default"!==i&&function(t){r.d(e,t,(function(){return o[t]}))}(i);r(522);var a=r(133),s=Object(a.a)(o.default,n.render,n.staticRenderFns,!1,null,"9845a322",null);e.default=s.exports},521:function(t,e,r){"use strict";var n=r(501);r.o(n,"render")&&r.d(e,"render",(function(){return n.render})),r.o(n,"staticRenderFns")&&r.d(e,"staticRenderFns",(function(){return n.staticRenderFns}))},522:function(t,e,r){"use strict";r(502)},523:function(t,e,r){(e=r(47)(!1)).push([t.i,".app_btn-top[data-v-9845a322]{width:40px;height:40px;background:var(--B0)}.app_btn-top .iconfont[data-v-9845a322]{font-size:24px}.app_btn-top[data-v-9845a322]{color:var(--B40)}.app_btn-top[data-v-9845a322]:hover{color:var(--B60)}.app_btn-top[data-v-9845a322]:focus{color:var(--B0);background:var(--B60)}",""]),t.exports=e},950:function(t,e,r){"use strict";r.r(e);var n=r(951),o=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e.default=o.a},951:function(t,e,r){"use strict";r(67),r(93),r(68),r(134),r(1),r(95),r(135),r(94),r(25),r(69);var n=r(2);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(4));r(97);var i=n(r(5)),a=n(r(136)),s=n(r(520)),l=r(96),c=n(r(488)),u=n(r(139));function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){(0,a.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.default={name:"LayoutPost",components:{BtnAppTop:s.default},data:function(){return{articleContributeFlag:!1,column:[],remoteLoading:!1,remoteOptions:[],articleDeleteFlag:!1}},computed:d(d({},(0,l.mapState)(["setting","isLogin","userInfo","customHeader","notifications"])),{},{articleInfo:function(){return this.$store.state.post?this.$store.state.post.articleInfo:null},showWriteMoreFlag:function(){return this.isLogin&&this.articleInfo&&this.userInfo&&this.userInfo.slug===this.articleInfo.author.slug}}),directives:{translate:{inserted:function(t,e){t.before_scroll_top=(0,u.default)(window).scrollTop(),t.translate_func=(0,c.default)((function(){var e=(0,u.default)(window).scrollTop();(0,u.default)(window).width()>=1024||(e>=100&&e>t.before_scroll_top?!(0,u.default)(t).hasClass("translate")&&(0,u.default)(t).addClass("translate"):(0,u.default)(t).hasClass("translate")&&(0,u.default)(t).removeClass("translate"),t.before_scroll_top=e)}),100),window.addEventListener("scroll",t.translate_func)},unbind:function(t){window.removeEventListener("scroll",t.translate_func)}}},methods:{editArticleClick:function(){window.location.href="".concat(window.location.origin,"/write/").concat(this.articleInfo.id)},contributeArticleClick:function(){this.column=[],this.remoteOptions=[],this.articleContributeFlag=!0},deleteArticleClick:function(){this.articleDeleteFlag=!0},deleteArticleCancel:function(){this.articleDeleteFlag=!1},deleteArticleSure:function(){this.deleteArticleSureApi()},deleteArticleSureApi:function(){var t=this;return(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.articleInfo&&t.articleInfo.id){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$http.post("/article/delete",{id:t.articleInfo.id});case 5:0===e.sent.error&&t.$message({message:"文章已删除。",type:"info"}),t.articleDeleteFlag=!1,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t.articleDeleteFlag=!1;case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},createArticleClick:function(){this.isLogin&&this.userInfo?window.open("/write"):this.$toLogin(this)},remoteMethod:function(t){var e=this;return(0,i.default)(o.default.mark((function r(){var n;return o.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(""===t){r.next=9;break}return e.remoteLoading=!0,r.next=4,e.$http.get("/special/column/search/page/get?limit=999&offset=0&title=".concat(t));case 4:0===(n=r.sent).error?e.remoteOptions=n.data:e.remoteOptions=[],e.remoteLoading=!1,r.next=11;break;case 9:e.remoteOptions=[],e.remoteLoading=!1;case 11:case"end":return r.stop()}}),r)})))()},contributeArticleSure:function(){var t=this;return(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.post("/special/column/article/receive",{target_id:t.articleInfo.id,from_id:t.column});case 2:0===e.sent.error&&t.$message({message:"文章已成功投递，等待审核。",type:"success"}),t.articleContributeFlag=!1;case 5:case"end":return e.stop()}}),e)})))()}}}}}]);